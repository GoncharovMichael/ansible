# Ansible and fail2ban
Если не будет запускаться, то подправь переменную "path_file". Она находится в 
```bash
vim roles/fail2ban_master/defaults/main.yml 
```
Коппируемый файл находится по адресу: 
```bash
cat roles/fail2ban_master/files/jail.local
```
## Ход работы: 
 - Сценарий работает с двумя операционными системами: debian and redhat.
 - Обновляет пакетные менеджеры: apt и yum.
 - Устанавливает fail2ban.
 - Конфиги с данными для входа в систему зашифрованы. А также зашифрован файл с правилами защиты для fail2ban.
    - Кол-во попыток - 3
    - С каждым разом время бана удваивается:
   
| Количество банов | Время блокировки |
|------------------|------------------|
| 1                | 1 минута         |
| 2                | 2 минуты         |
| 3                | 4 минуты         |

После, ip добавляется в "recidiv-list" и блокируется навсегда "-1".

Что, кстати, не очень экономно, но условие задачи - есть условие задачи.
  - Выводит на экран состояние сервера fail2ban.
    
## Запускать playbook с помощью команды: 
```bash
ansible-playbook playbook.yml --ask-vault-pass
```
или 
```bash
ansible-playbook playbook.yml --vault-password-file [path_to_passwfile]
```
  p.s пароль передам через лс.
  
  p.s.s знаю, что было долго, но тем не менее жду следующего задания
